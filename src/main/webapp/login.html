<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>登录</title>
<script>
	var login = function() {
		var userName = document.getElementById("userName").value;
		var password = document.getElementById("password").value;
		alert(userName);
		ajax({
			url : "/userservice/login.do",
			type : "POST",
			data : {
				userName : userName,
				password : password
			},
			dataType : "json",
			success : function(data) {
				alert(data);
			},
			fail : function(status) {
				alert(status);
			}
		});
	};
	function ajax(options) {
		options = options || {};
		options.type = (options.type || "GET").toUpperCase();
		options.dataType = options.dataType || "json";
		//格式化参数 
		var formatParams = function(data) {
			var arr = [];
			for ( var name in data) {
				arr.push(encodeURIComponent(name) + "=" + encodeURIComponent(data[name]));
			}
			arr.push(("v=" + Math.random()).replace(".", ""));
			return arr.join("&");
		}
		var params = formatParams(options.data);
		//创建 - 非IE6 - 第一步 
		if (window.XMLHttpRequest) {
			var xhr = new XMLHttpRequest();
		} else {
			//IE6及其以下版本浏览器 
			var xhr = new ActiveXObject('Microsoft.XMLHTTP');
		}
		//接收 - 第三步 
		xhr.onreadystatechange = function() {
			if (xhr.readyState == 4) {
				var status = xhr.status;
				if (status >= 200 && status < 300) {
					options.success && options.success(xhr.responseText, xhr.responseXML);
				} else {
					options.fail && options.fail(status);
				}
			}
		}
		//连接 和 发送 - 第二步 
		if (options.type == "GET") {
			xhr.open("GET", options.url + "?" + params, true);
			xhr.send(null);
		} else if (options.type == "POST") {
			xhr.open("POST", options.url, true);
			//设置表单提交时的内容类型 
			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhr.send(params);
		}
	}
</script>
</head>
<body>

	用户名：
	<input id="userName"> 密码：
	<input id="password">
	<input id="login" type="button" value="登录" onclick="login()">

</body>
</html>