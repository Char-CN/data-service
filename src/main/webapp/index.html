<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>IIIIIIIIIIIIII</title>
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="themes/bootstrap/easyui.css">
<link rel="stylesheet" type="text/css" href="css/commons.css">
<link rel="stylesheet" type="text/css" href="themes/icon.css">
<link rel="stylesheet" type="text/css" href="css/icon_extends.css">
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.easyui.min.js"></script>
<script type="text/javascript" src="js/jquery.easyui.extends.js"></script>
<script type="text/javascript" src="js/jquery.easyui.commons.js"></script>
<script type="text/javascript" src="js/Sortable.js"></script>
<script type="text/javascript" src="js/jquery.binding.js"></script>
<script type="text/javascript" src="js/locale/easyui-lang-zh_CN.js"></script>
<script>
	$(function() {
		$.ds.commons.referCenterByMenuId = function(id) {
			$.ds.commons.chooseTreeId = id;
			var c = $("#center");
			c.unbind('contextmenu');
			c.bind('contextmenu', function(e) {
				e.preventDefault();
				$('#center_menu').menu('show', {
					left : e.pageX,
					top : e.pageY
				});
				rp_center_block = true;
			});
			c.panel({
				href : 'center.html',
				extractor : function(data) {
					data = $.ds.replaceAll(data, "[$]queryString", "id=" + id);
					data = $.ds.replaceAll(data, "[$]windowId", "center");
					return data;
				}
			});
		};

		$.ds.commons.addFootTask = function(window_id, text) {
			var a = $('<a style="margin:2px;"></a>');
			// a.attr("id", id);
			a.attr("window_id", window_id);
			a.attr("data-options", "plain:false");
			a.html(text.length > 10 ? text.substr(0, 10) + '...' : text);
			a.linkbutton();
			a.click(function() {
				var window_id = $(this).attr("window_id");
				$('#' + window_id).window('open');
			});
			$("#foot").append(a);
		};

		$.ds.commons.removeFootTask = function(window_id) {
			$("#foot").find("[window_id='" + window_id + "']").remove();
		};

		$.ds.commons.openWindow = function(id, title, url, queryString) {
			if ($("#" + id).length != 0) {
				return $.dsmessager.show(title + "已经存在。");
			}
			var _window = $('<div></div>');
			_window.attr("id", id);
			_window.attr("title", title);
			_window.attr("class", "easyui-window");
			_window.window({
				href : url,
				top : $.ds.getHeadHeight(),
				left : 0,
				height : $.ds.getCenterHeight() < $.ds.getDefaultWindowHeight() ? $.ds.getCenterHeight() : $.ds.getDefaultWindowHeight(),
				width : $.ds.getDefaultWindowWidth(),
				closed : false,
				modal : false,
				loadingMessage : '请稍等，正在读取服务器内容，加载数据。。。',
				doSize : false,
				maximizable : false,
				minimizable : true,
				extractor : function(data) {
					data = $.ds.replaceAll(data, "[$]queryString", queryString);
					data = $.ds.replaceAll(data, "[$]windowId", id);
					return data;
				},
				onClose : function(forceDestroy) {
					$(this).window('destroy');
				},
				onDestroy : function() {
					$.ds.commons.removeFootTask(this.id);
				}
			}).window('center');
			$.ds.commons.addFootTask(id, title);
		};

		$.ds.commons.configRun = function(id) {
			
		};
	});
</script>
</head>
<body>
	<div id="main" class="easyui-layout" data-options="fit:true">
		<div id="head" data-options="region:'north'" style="height: 80px;"></div>
		<div id="west" class="easyui-panel" data-options="region:'west',split:true, href:'west.html'" title="目录" style="width: 200px;"></div>
		<div id="center" class="easyui-panel" data-options="region:'center',title:' '"></div>
		<div id="foot" data-options="region:'south'" style="height: 31px;"></div>
	</div>
</body>
</html>