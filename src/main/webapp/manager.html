<script>
	$(function() {
		var windowId = 'center';
		var this_window = $("#" + windowId);
		var this_ul = this_window.find("#center_ul");
		this_window.find('.datasource').bind('click', function() {
			$.ds.alert('抱歉，该功能暂未开放，配置数据源请联系管理员。');
		});

// 		var isadmin = $userservice.checkurl('isadmin');
// 		var isuser = $userservice.checkurl('isuser');

		if ($isadmin) {
			this_window.find('.permissions').bind('click', function() {
				$.ds.commons.openWindow("center_add_user_tree", $.ds.icon.user , "分配用户目录权限", "addusertree.html").dialog('resize', {
					height : 230,
					width : 600,
					top: 100
				});
			});
			this_window.find('.all_task_list').bind('click', function() {
// 				$.ds.confirm('对不起，暂未开放。');
// 				$.ds.commons.openWindow("mytasklist", $.ds.icon.list_alt , "所有任务列表", "mytasklist.html").dialog('resize', {
// 					height : 380,
// 					top : 100
// 				});
				$.ds.commons.openWindow("mytasklist", $.ds.icon.list_alt , "所有任务列表", "alltasklist.html").dialog('resize', {
					height : 400,
					top : 100
				});
			});
			this_window.find('.my_task_list').bind('click', function() {
				$("#titlebar").DSFind("mytasklist").click();
// 				$.ds.commons.openWindow("mytasklist", $.ds.icon.list , "我的任务列表", "mytasklist.html").dialog('resize', {
// 					height : 380,
// 					top : 100
// 				});
			});
			this_window.find('.scheduler_list').bind('click', function() {
				$.ds.commons.openWindow("schedulerlist", $.ds.icon.clock , "调度任务列表", "schedulerlist.html").dialog('resize', {
					height : 400,
					top : 100
				});
			});
			this_window.find('.run_task_list').bind('click', function() {
				$.ds.commons.openWindow("analytic_run_task", $.ds.icon.table , "执行任务次数列表", "analytic_run_task.html").dialog('resize', {
					height : 400,
					top : 100
				});
			});
			this_window.find('.add_task_list').bind('click', function() {
				$.ds.commons.openWindow("analytic_add_task", $.ds.icon.table , "创建任务次数列表", "analytic_add_task.html").dialog('resize', {
					height : 400,
					top : 100
				});
			});
		} else if ($isuser) {
			this_window.find(".dsmanager").css("display", "none");
			this_window.find(".dsanalytic").css("display", "none");
			this_window.find(".scheduler_list").css("display", "none");
			this_window.find(".all_task_list").css("display", "none");
			this_window.find('.my_task_list').bind('click', function() {
				$.ds.commons.openWindow("mytasklist", $.ds.icon.list , "我的任务列表", "mytasklist.html").dialog('resize', {
					height : 400,
					top : 100
				});
			});
		} else {
			this_window.find(".dsmanager").css("display", "none");
			this_window.find(".dsanalytic").css("display", "none");
			this_window.find(".scheduler_list").css("display", "none");
			this_window.find(".all_task_list").css("display", "none");
		}
	});
</script>
<div>
	<fieldset class="dsmanager" style="margin-top: 20px; padding-bottom: 5px; border: 1px solid;">
		<legend>数据服务模块</legend>
		<ul class="dsul">
			<li class="dsli datasource"><i class="fa fa-database fa-3x" aria-hidden="true"></i>数据源管理</li>
			<li class="dsli permissions"><i class="fa fa-user fa-3x" aria-hidden="true"></i>分配用户目录权限</li>
		</ul>
	</fieldset>
	<fieldset class="dsscheduler" style="margin-top: 20px; padding-bottom: 5px; border: 1px solid;">
		<legend>定时任务模块</legend>
		<ul class="dsul">
			<li class="dsli scheduler_list"><i class="fa fa-clock-o fa-3x" aria-hidden="true"></i>调度任务列表</li>
			<li class="dsli all_task_list"><i class="fa fa-list-alt fa-3x" aria-hidden="true"></i>所有任务列表</li>
			<li class="dsli my_task_list"><i class="fa fa-list fa-3x" aria-hidden="true"></i>我的任务列表</li>
		</ul>
	</fieldset>
	<fieldset class="dsanalytic" style="margin-top: 20px; padding-bottom: 5px; border: 1px solid;">
		<legend>使用分析模块</legend>
		<ul class="dsul">
			<li class="dsli run_task_list"><i class="fa fa-table fa-3x" aria-hidden="true"></i>执行任务次数列表</li>
			<li class="dsli add_task_list"><i class="fa fa-table fa-3x" aria-hidden="true"></i>创建任务次数列表</li>
		</ul>
	</fieldset>
</div>
